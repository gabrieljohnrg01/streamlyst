<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Streamlyst - Your Ultimate Streaming Platform</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Ad banner styles */
        .ad-banner {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 10px 0;
            padding: 5px;
            background: rgba(0,0,0,0.1);
            border-radius: 8px;
            min-height: 90px;
        }
        
        .ad-banner.top {
            margin-bottom: 20px;
        }
        
        .ad-banner.bottom {
            margin-top: 20px;
        }
        
        /* Recommended ads widget - styled like content cards */
        .ad-banner.recommended {
            margin: 30px 0;
            min-height: 200px;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border-radius: 12px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(51, 65, 85, 0.8);
            transition: all 0.3s ease;
        }
        
        .ad-banner.recommended:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px -5px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
        }
        
        .ad-banner.recommended::before {
            content: 'Sponsored';
            position: absolute;
            top: 12px;
            right: 12px;
            background: rgba(251, 191, 36, 0.9);
            color: #1e293b;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 10;
        }
        
        .ad-banner.recommended::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 0%, rgba(59, 130, 246, 0.1) 50%, transparent 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .ad-banner.recommended:hover::after {
            opacity: 1;
        }
        
        .sidebar-ad {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            z-index: 999;
            width: 160px;
            height: 600px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(10px);
        }
        
        .sidebar-ad.left {
            left: 10px;
        }
        
        .sidebar-ad.right {
            right: 10px;
        }
        
        /* Adjust main content to accommodate sidebar ads */
        .main-content {
            margin: 0 180px;
            padding: 20px;
        }
        
        /* Make sidebar ads more visible */
        .sidebar-ad::before {
            content: 'Advertisement';
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255,255,255,0.7);
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .disclaimer {
            background: #1e293b;
            color: #94a3b8;
            padding: 20px;
            text-align: center;
            font-size: 14px;
            line-height: 1.6;
            border-top: 1px solid #334155;
        }
        
        .disclaimer h4 {
            color: #f1f5f9;
            margin-bottom: 10px;
        }
        
        /* Responsive design for ads */
        @media (max-width: 1200px) {
            .sidebar-ad {
                display: none;
            }
            
            .main-content {
                margin: 0 20px;
            }
        }
        
        @media (max-width: 768px) {
            .ad-banner {
                min-height: 60px;
            }
            
            .ad-banner.recommended {
                min-height: 80px;
            }
        }
    </style>
</head>
<body>
    <!-- Left Sidebar Ad -->
    <div class="sidebar-ad left">
        <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script> 
        <ins class="eas6a97888e2" data-zoneid="5644244"></ins> 
        <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
    </div>

    <!-- Right Sidebar Ad -->
    <div class="sidebar-ad right">
        <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script> 
        <ins class="eas6a97888e2" data-zoneid="5644246"></ins> 
        <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">Streamlyst</div>
            <div class="nav-links">
                <a href="#" onclick="showHome()">Home</a>
                <a href="#" onclick="showCategory('movies')">Movies</a>
                <a href="#" onclick="showCategory('tv')">TV Shows</a>
                <a href="#" onclick="showCategory('anime')">Anime</a>
                <a href="#" onclick="showWatchlist()">Watchlist</a>
            </div>
            <div class="auth-section">
                <div id="authButtons" class="auth-buttons">
                    <button class="btn btn-secondary" onclick="showAuthModal('login')">Login</button>
                    <button class="btn btn-primary" onclick="showAuthModal('register')">Register</button>
                </div>
                <div id="userMenu" class="user-menu" style="display: none;">
                    <div class="user-avatar" onclick="toggleDropdown()">
                        <span id="userInitial">U</span>
                    </div>
                    <div id="userDropdown" class="dropdown">
                        <a href="#" onclick="showWatchlist()">My Watchlist</a>
                        <a href="#" onclick="logout()">Logout</a>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Top Ad Banner -->
    <div class="ad-banner top">
        <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script> 
        <ins class="eas6a97888e2" data-zoneid="5644240"></ins> 
        <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Hero Section -->
            <section class="hero">
                <h1>Welcome to Streamlyst</h1>
                <p>Discover and stream your favorite movies, TV shows, and anime</p>
                
                <!-- Search Bar -->
                <div class="search-bar">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search for movies, TV shows, anime...">
                    <button class="search-btn" onclick="performSearch()">Search</button>
                </div>

                <!-- Categories -->
                <div class="categories">
                    <button class="category-btn active" onclick="showCategory('trending')">Trending</button>
                    <button class="category-btn" onclick="showCategory('movies')">Movies</button>
                    <button class="category-btn" onclick="showCategory('tv')">TV Shows</button>
                    <button class="category-btn" onclick="showCategory('anime')">Anime</button>
                </div>
            </section>

            <!-- Recommended Ads Widget - Positioned between hero and content -->
            <div class="ad-banner recommended">
                <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script> 
                <ins class="eas6a97888e20" data-zoneid="5665952"></ins> 
                <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
            </div>

            <!-- Content Grid -->
            <section id="contentSection">
                <div id="loadingSpinner" class="loading">
                    <div class="spinner"></div>
                    <p>Loading content...</p>
                </div>
                <div id="contentGrid" class="content-grid"></div>
            </section>
        </div>
    </main>

    <!-- Bottom Ad Banner -->
    <div class="ad-banner bottom">
        <script async type="application/javascript" src="https://a.magsrv.com/ad-provider.js"></script> 
        <ins class="eas6a97888e2" data-zoneid="5644242"></ins> 
        <script>(AdProvider = window.AdProvider || []).push({"serve": {}});</script>
    </div>

    <!-- Content Detail Modal -->
    <div id="contentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Content Title</h2>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modalContent"></div>
            </div>
        </div>
    </div>

    <!-- Video Player Modal -->
    <div id="videoPlayerModal" class="modal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2 id="playerTitle">Now Playing</h2>
                <button class="close-btn" onclick="closeVideoPlayer()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="video-container">
                    <iframe id="videoPlayer" class="video-player" allowfullscreen></iframe>
                </div>
                <div id="playerControls" style="display: flex; justify-content: space-between; margin-top: 1rem;">
                    <button id="prevEpisodeBtn" class="btn btn-secondary" style="display: none;" onclick="prevEpisode()">‚Üê Previous</button>
                    <button id="nextEpisodeBtn" class="btn btn-primary" style="display: none;" onclick="nextEpisode()">Next ‚Üí</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal auth-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="authTitle">Login</h2>
                <button class="close-btn" onclick="closeAuthModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="authForm">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%;">
                        <span id="authButtonText">Login</span>
                    </button>
                </form>
                <div id="authExtraLinks" style="margin-top: 1rem; text-align: center;"></div>
                <p style="text-align: center; margin-top: 1rem; color: #94a3b8;">
                    <span id="authSwitchText">Don't have an account?</span>
                    <a href="#" id="authSwitch" style="color: #3b82f6;">Register</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Disclaimer Section -->
    <footer class="disclaimer">
        <h4>Important Disclaimer</h4>
        <p>
            Streamlyst does not host any video content on our servers. All movies, TV shows, and anime are hosted by third-party providers and streaming services. 
            We are not responsible for the content, quality, or availability of any media files. All content is sourced from publicly available streaming platforms and services. 
            If you are the owner of any content and wish to have it removed, please contact us directly.
        </p>
        <p style="margin-top: 10px; font-size: 12px; opacity: 0.8;">
            By using this platform, you acknowledge that you understand and agree to these terms. 
            Streamlyst is a content discovery platform that aggregates links to publicly available streaming content.
        </p>
    </footer>

    <!-- Ad Block Detection and Blocking -->
    <div id="adBlockerOverlay" style="display: none;">
        <div style="
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            z-index: 99999;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: Arial, sans-serif;
        ">
            <div style="
                text-align: center;
                max-width: 500px;
                padding: 40px;
                background: rgba(255,255,255,0.1);
                border-radius: 20px;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255,255,255,0.2);
                box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            ">
                <div style="font-size: 60px; margin-bottom: 20px;">üö´</div>
                <h2 style="margin: 0 0 20px 0; font-size: 28px; color: #f8fafc;">Ad Blocker Detected</h2>
                <p style="margin: 0 0 25px 0; font-size: 16px; line-height: 1.6; color: #cbd5e1;">
                    We've detected that you're using an ad blocker. This site is supported by advertisements, 
                    which help us provide free content to all users.
                </p>
                <div style="
                    background: rgba(239, 68, 68, 0.1);
                    border: 1px solid rgba(239, 68, 68, 0.3);
                    border-radius: 10px;
                    padding: 20px;
                    margin: 20px 0;
                ">
                    <p style="margin: 0; font-size: 14px; color: #fca5a5;">
                        <strong>Access Blocked:</strong> Please disable your ad blocker to continue using Streamlyst.
                    </p>
                </div>
                <div style="margin-top: 30px;">
                    <h3 style="font-size: 18px; margin: 0 0 15px 0; color: #f1f5f9;">How to disable your ad blocker:</h3>
                    <div style="text-align: left; font-size: 14px; line-height: 1.8; color: #e2e8f0;">
                        <p style="margin: 10px 0;"><strong>‚Ä¢ uBlock Origin:</strong> Click the shield icon ‚Üí Click the power button</p>
                        <p style="margin: 10px 0;"><strong>‚Ä¢ Adblock Plus:</strong> Click the ABP icon ‚Üí Toggle "Enabled on this site"</p>
                        <p style="margin: 10px 0;"><strong>‚Ä¢ AdGuard:</strong> Click the AdGuard icon ‚Üí Toggle protection off</p>
                        <p style="margin: 10px 0;"><strong>‚Ä¢ Brave Browser:</strong> Click the Brave shield ‚Üí Turn off "Block ads"</p>
                    </div>
                </div>
                <button onclick="checkAdBlocker()" style="
                    background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
                    color: white;
                    border: none;
                    padding: 15px 30px;
                    border-radius: 25px;
                    font-size: 16px;
                    font-weight: bold;
                    cursor: pointer;
                    margin-top: 25px;
                    box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
                    transition: transform 0.2s;
                " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                    I've Disabled My Ad Blocker
                </button>
                <p style="margin: 20px 0 0 0; font-size: 12px; color: #94a3b8;">
                    After disabling, click the button above to continue
                </p>
            </div>
        </div>
    </div>

    <script>
        // Aggressive ad block detection and blocking
        function detectAndBlockAdBlocker() {
            let adBlockerDetected = false;
            
            // Method 1: Test ad element
            const adTest = document.createElement('div');
            adTest.innerHTML = '&nbsp;';
            adTest.className = 'adsbox ad-banner advertisement ads';
            adTest.style.cssText = 'position: absolute !important; left: -10000px !important; width: 1px !important; height: 1px !important;';
            document.body.appendChild(adTest);
            
            setTimeout(() => {
                if (adTest.offsetHeight === 0 || adTest.style.display === 'none' || adTest.style.visibility === 'hidden') {
                    adBlockerDetected = true;
                }
                document.body.removeChild(adTest);
                
                // Method 2: Test ad script loading
                const script = document.createElement('script');
                script.src = 'https://a.magsrv.com/ad-provider.js';
                script.onerror = function() {
                    adBlockerDetected = true;
                    showAdBlockerMessage();
                };
                
                if (adBlockerDetected) {
                    showAdBlockerMessage();
                } else {
                    // Double check after script attempts to load
                    setTimeout(() => {
                        if (typeof AdProvider === 'undefined') {
                            showAdBlockerMessage();
                        }
                    }, 2000);
                }
                
                document.head.appendChild(script);
            }, 100);
        }
        
        function showAdBlockerMessage() {
            // Hide all page content
            document.body.style.overflow = 'hidden';
            const overlay = document.getElementById('adBlockerOverlay');
            overlay.style.display = 'block';
            
            // Block right-click and keyboard shortcuts
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                return false;
            });
            
            document.addEventListener('keydown', function(e) {
                // Block F12, Ctrl+Shift+I, Ctrl+U, etc.
                if (e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && e.key === 'I') || 
                    (e.ctrlKey && e.shiftKey && e.key === 'J') ||
                    (e.ctrlKey && e.key === 'U')) {
                    e.preventDefault();
                    return false;
                }
            });
        }
        
        function checkAdBlocker() {
            // Re-test for ad blocker
            const adTest = document.createElement('div');
            adTest.innerHTML = '&nbsp;';
            adTest.className = 'adsbox';
            adTest.style.cssText = 'position: absolute !important; left: -10000px !important; width: 1px !important; height: 1px !important;';
            document.body.appendChild(adTest);
            
            setTimeout(() => {
                if (adTest.offsetHeight > 0 && adTest.style.display !== 'none') {
                    // Ad blocker seems to be disabled
                    document.body.style.overflow = 'auto';
                    document.getElementById('adBlockerOverlay').style.display = 'none';
                    location.reload(); // Reload to load ads properly
                } else {
                    // Still blocked
                    alert('Ad blocker is still active. Please make sure to disable it completely and refresh the page.');
                }
                document.body.removeChild(adTest);
            }, 100);
        }
        
        // Initialize detection immediately
        detectAndBlockAdBlocker();
        
        // Also check when page loads
        document.addEventListener('DOMContentLoaded', function() {
            detectAndBlockAdBlocker();
        });
        
        // Block access if ad scripts fail to load
        window.addEventListener('error', function(e) {
            if (e.filename && e.filename.includes('magsrv.com')) {
                showAdBlockerMessage();
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html>